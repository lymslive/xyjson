# xyjson

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![C++](https://img.shields.io/badge/C%2B%2B-17-blue.svg)](https://en.cppreference.com/w/cpp/17)
[English Version](README-en.md) | [ä¸­æ–‡æ–‡æ¡£](README.md)

xyjson æ˜¯åŸºäºé«˜æ€§èƒ½ [yyjson](https://github.com/ibireme/yyjson) å°è£…çš„ C++ çº¯å¤´æ–‡ä»¶åº“ï¼Œé€šè¿‡æ“ä½œç¬¦é‡è½½æä¾›ç›´è§‚çš„ JSON å¤„ç†ä½“éªŒã€‚
å…¶å‘½åé™¤äº†æ²¿è¢­ yyjson å¤–ï¼Œæ›´å› ä¸º **x y** å¸¸ç”¨äºæ•°å­¦ç¬¦å·ï¼Œè¿½æ±‚åƒæ•°å­¦å˜é‡ç¬¦å·ä¸€æ ·æ“ä½œ JSON æ•°æ®ï¼Œè€Œå®ç°ä»£ç æ‰€åœ¨å‘½åç©ºé—´ä»å« `yyjson::` 
ä»¥ç¤ºè‡´æ•¬ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½** - åº•å±‚åŸºäº yyjsonï¼Œé›¶æ‹·è´è®¾è®¡
- âœ¨ **ç›´è§‚è¯­æ³•** - ä¸°å¯Œçš„æ“ä½œç¬¦é‡è½½ï¼Œç±»ä¼¼åŸç”Ÿ C++
- ğŸ”’ **ç±»å‹å®‰å…¨** - ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œè¿è¡Œæ—¶å®‰å…¨æå–
- ğŸ“š **å®Œæ•´åŠŸèƒ½** - æ”¯æŒè¯»/å†™ã€è¿­ä»£ã€æ–‡ä»¶æ“ä½œç­‰
- ğŸ› ï¸ **æ˜“äºé›†æˆ** - **çº¯å¤´æ–‡ä»¶åº“**ï¼ŒCMake æ„å»ºæ”¯æŒï¼Œæ”¯æŒ `find_package` é›†æˆ

## ä¾èµ–é¡¹

- **[yyjson](https://github.com/ibireme/yyjson)** - æ ¸å¿ƒä¾èµ–ï¼Œé«˜æ€§èƒ½ JSON è§£æåº“
- **[couttast](https://github.com/lymslive/couttast)** - å¯é€‰ä¾èµ–ï¼Œä»…æµ‹è¯•ä¸å¼€å‘ä½¿ç”¨
- **C++ æ ‡å‡†**: C++17 æˆ–æ›´é«˜
- **å¹³å°**: Linux, macOS, Windows (MinGW)

## å¿«é€Ÿå¼€å§‹

### å…å®‰è£…ç›´æ¥ä½¿ç”¨

åœ¨å·²å®‰è£… yyjson åº•å±‚åº“åï¼Œä»…éœ€å°†å•å¤´æ–‡ä»¶ `include/xyjson.h` æ‹·è´åˆ°é¡¹ç›®é€‚åˆä½ç½®ï¼Œ
å¼€ç®±å³ç”¨ã€‚

**ä»£ç ç¤ºä¾‹ï¼š**
```cpp
#include "xyjson.h"

// è¯»å– JSON
std::string json = R"({"name": "Alice", "age": 30})";
xyjson::Document doc(json);

// æå–å€¼
std::string name = doc / "name" | ""; // è¯»åˆ° "Alice"
int age = doc / "age" | 0;            // è¯»åˆ° 30
```

### CMake é›†æˆå®‰è£…

æ”¯æŒ cmake çš„æ ‡å‡†æ„å»ºæµç¨‹ï¼š
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/lymslive/xyjson
cd xyjson

# æ„å»ºï¼ˆå¦‚æœæœªå®‰è£…ä¾èµ–å°†è‡ªåŠ¨ä¸‹è½½ï¼‰
mkdir build && cd build
cmake .. && make

# å®‰è£…
sudo make install
```

ç„¶ååœ¨å®¢æˆ·é¡¹ç›®ä¸­ä½¿ç”¨ `find_package` é›†æˆï¼š
```cmake
# åœ¨ CMakeLists.txt ä¸­ä½¿ç”¨
find_package(xyjson REQUIRED)
target_link_libraries(your-target PRIVATE xyjson::xyjson)
    ```

## æ ¸å¿ƒç”¨æ³•ç¤ºä¾‹

### åŸºæœ¬æ“ä½œ

```cpp
// ä» json ä¸²åˆ›å»ºæ–‡æ¡£å¯¹è±¡ï¼Œä¹Ÿå¯å¯¹å·²æœ‰å¯¹è±¡ doc << è¾“å…¥ json ä¸²è§£æ
xyjson::Document doc(R"({"name": "Alice", "scores": [95, 87]})");

// è·¯å¾„è®¿é—®
std::string name = doc / "name" | ""; // "Alice"

// æ•°ç»„è®¿é—®
int firstScore = doc / "scores" / 0 | 0; // 95

// ç±»å‹åˆ¤æ–­
bool isString = doc / "name" & ""; // true
bool isNumber = doc / "age" & 0;   // true
```

### å¯å†™æ–‡æ¡£æ“ä½œ

```cpp
// åˆ›å»ºå¯å†™æ–‡æ¡£å¯¹è±¡ï¼Œé»˜è®¤æ„å»ºä¹Ÿæ˜¯åˆ›å»ºç©º {} æ ¹ç»“ç‚¹
xyjson::MutableDocument mutDoc("{}"); // ç‰¹æ®Šå­—é¢é‡è¡¨ç¤ºç©ºå¯¹è±¡

// æ·»åŠ æ–°é”®ä¸èƒ½ç”¨è·¯å¾„æ“ä½œç¬¦ / ï¼Œç´¢å¼•æ“ä½œ [] æ”¯æŒè‡ªåŠ¨æ·»åŠ 
mutDoc["name"] = "Bob";
mutDoc["scores"] = "[]"; // ç‰¹æ®Šå­—é¢é‡è¡¨ç¤ºç©ºæ•°ç»„

// æ•°ç»„è¿½åŠ 
mutDoc / "scores" << 95 << 87;

// æ–‡ä»¶å†™å…¥
mutDoc.writeFile("output.json");

// æ ‡å‡†æµè¾“å‡º
std::cout << mutDoc << std::endl;
```

### è¿­ä»£éå†

```cpp
// æ•°ç»„è¿­ä»£
for (auto iter = doc / "items" % 0; iter; ++iter) {
    std::cout << "Item " << iter->key << ": " << (iter->value | "") << std::endl;
}

// å¯¹è±¡è¿­ä»£  
for (auto iter = doc / "user" % ""; iter; ++iter) {
    std::cout << iter->key << " = " << (iter->value | "") << std::endl;
}
```

## æ–‡æ¡£å¯¼èˆª

- ğŸ“– [ä½¿ç”¨æŒ‡å—](docs/usage.md) - è¯¦ç»†çš„ä½¿ç”¨æ•™ç¨‹å’Œæœ€ä½³å®è·µ
- ğŸ”§ [API å‚è€ƒ](docs/api.md) - å®Œæ•´çš„æ“ä½œç¬¦å’Œç±»æ–¹æ³•æ–‡æ¡£
- ğŸ¨ [è®¾è®¡ç†å¿µ](docs/design.md) - åº“çš„è®¾è®¡æ€è·¯å’Œå“²å­¦
- ğŸ§ª [å•å…ƒæµ‹è¯•](utest/README.md) - å•å…ƒæµ‹è¯•è¯´æ˜
- ğŸ“‹ [å¼€å‘éœ€æ±‚](task_todo.md) - å½“å‰é¡¹ç›®å¼€å‘çš„éœ€æ±‚åˆ—è¡¨
- ğŸ“Š [ä»»åŠ¡æ—¥å¿—](task_log.md) - AI åä½œçš„ä»»åŠ¡å®Œæˆè®°å½•

## é¡¹ç›®çŠ¶æ€

- âœ… **ç¨³å®šå¯ç”¨** - æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆå¹¶é€šè¿‡æµ‹è¯•
- ğŸ”„ **æŒç»­å¼€å‘** - æŒ‰ [éœ€æ±‚åˆ—è¡¨](task_todo.md) é€æ­¥å®Œå–„åŠŸèƒ½
- ğŸ§ª **æµ‹è¯•è¦†ç›–** - å®Œå–„çš„å•å…ƒæµ‹è¯•ç¡®ä¿è´¨é‡

### æŒç»­é›†æˆ

é¡¹ç›®é…ç½®äº† GitHub Actions CI/CD æµæ°´çº¿ï¼š

- âœ… **è‡ªåŠ¨æ„å»º**: main åˆ†æ”¯æäº¤æ—¶è‡ªåŠ¨æ„å»º
- âœ… **è‡ªåŠ¨æµ‹è¯•**: è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
- âœ… **ä¾èµ–ç®¡ç†**: è‡ªåŠ¨ä¸‹è½½å¹¶æ„å»ºä¾èµ–åº“
- âœ… **è·¨å¹³å°**: æ”¯æŒ Ubuntu Linux ç¯å¢ƒ

æŸ¥çœ‹ [Actions](https://github.com/lymslive/xyjson/actions) é¡µé¢è·å–æ„å»ºçŠ¶æ€ã€‚

<!--
## ç¤ºä¾‹ä»£ç 

é¡¹ç›®æš‚æ— å•ç‹¬çš„ `examples/` ç›®å½•ï¼Œä½† `utest/` å­ç›®å½•ä¸­çš„æµ‹è¯•ç”¨ä¾‹æä¾›äº†è¯¦å°½çš„ç”¨æ³•ç¤ºä¾‹ï¼Œå¯ä½œä¸ºå­¦ä¹ å’Œå‚è€ƒçš„èµ„æºã€‚

## æ€§èƒ½ä¼˜åŒ–

åŸºäº yyjson çš„é«˜æ€§èƒ½ç‰¹æ€§ï¼Œxyjson åœ¨ä¿æŒæ˜“ç”¨æ€§çš„åŒæ—¶æä¾›ä¼˜ç§€çš„æ€§èƒ½ï¼š

- **é›¶æ‹·è´è§£æ** - ç›´æ¥æ“ä½œåŸå§‹ JSON æ•°æ®
- **é«˜æ•ˆå†…å­˜ç®¡ç†** - RAII è‡ªåŠ¨èµ„æºé‡Šæ”¾
- **å­—ç¬¦ä¸²ä¼˜åŒ–** - å­—é¢é‡å¼•ç”¨å‡å°‘æ‹·è´
-->

## å¼€å‘æµç¨‹

è¯¦è§ [è§„èŒƒæŒ‡å—](DEVELOPMENT_GUIDE.md) ã€‚

### è¿è¡Œæµ‹è¯•

```bash
cd build
./utxyjson --cout=silent  # é™é»˜æ¨¡å¼
./utxyjson                # è¯¦ç»†è¾“å‡º
```

### ä»£ç ç»“æ„

```
xyjson/
â”œâ”€â”€ include/xyjson.h     # ä¸»å¤´æ–‡ä»¶ï¼ˆçº¯å¤´æ–‡ä»¶åº“ï¼‰
â”œâ”€â”€ utest/               # å•å…ƒæµ‹è¯•ï¼ˆå«ä¸°å¯Œç¤ºä¾‹ï¼‰
â”œâ”€â”€ docs/                # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ task_todo.md         # å¼€å‘éœ€æ±‚ç®¡ç†
â”œâ”€â”€ task_log.md          # ä»»åŠ¡å®Œæˆè®°å½•
â””â”€â”€ CMakeLists.txt       # æ„å»ºé…ç½®ï¼ˆæ”¯æŒ find_packageï¼‰
```

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ç›¸å…³é¡¹ç›®

- [yyjson](https://github.com/ibireme/yyjson) - åº•å±‚é«˜æ€§èƒ½ JSON åº“
- [couttast](https://github.com/lymslive/couttast) - å•å…ƒæµ‹è¯•æ¡†æ¶

---

*ç®€æ´ç›´è§‚çš„ JSON æ“ä½œï¼Œè®© C++ å¼€å‘æ›´æ„‰å¿«ï¼*
